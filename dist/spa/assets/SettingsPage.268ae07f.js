import{Q as ee,a as A,b as te,c as k}from"./QTabPanels.3cc365e1.js";import{T as ae}from"./TouchPan.2900bd02.js";import{p as le,a1 as ne,a2 as oe,r as v,c as w,w as T,h as E,B as $,ah as se,V as re,g as ue,W as ie,d as S,X as O,o as H,l as x,q as U,f as t,x as o,F as z,A as y,a6 as J,u as q,a7 as C,Q as g,z as V,a5 as de,ax as ce,aH as me,aI as fe,ac as ve,aJ as _e,a3 as pe,Z as W,Y as L,t as ge,m as X,R as ye,_ as he}from"./index.737d3221.js";import{Q as be}from"./QPage.7f3ad2a1.js";import{Q as B,e as we,a as R}from"./QBanner.6a1b92b4.js";import{u as Q}from"./auth-store.79001c12.js";import{u as Y}from"./use-quasar.8362b04f.js";import{Q as F}from"./QImg.fb96251b.js";import{u as Ve}from"./account-store.93e228d8.js";import"./QResizeObserver.8a719490.js";import"./selection.cf32c1d7.js";import"./axios.37d53be1.js";var Ce=le({name:"QSplitter",props:{...ne,modelValue:{type:Number,required:!0},reverse:Boolean,unit:{type:String,default:"%",validator:e=>["%","px"].includes(e)},limits:{type:Array,validator:e=>e.length!==2||typeof e[0]!="number"||typeof e[1]!="number"?!1:e[0]>=0&&e[0]<=e[1]},emitImmediately:Boolean,horizontal:Boolean,disable:Boolean,beforeClass:[Array,String,Object],afterClass:[Array,String,Object],separatorClass:[Array,String,Object],separatorStyle:[Array,String,Object]},emits:["update:modelValue"],setup(e,{slots:a,emit:l}){const{proxy:{$q:i}}=ue(),s=oe(e,i),u=v(null),m={before:v(null),after:v(null)},_=w(()=>`q-splitter no-wrap ${e.horizontal===!0?"q-splitter--horizontal column":"q-splitter--vertical row"} q-splitter--${e.disable===!0?"disabled":"workable"}`+(s.value===!0?" q-splitter--dark":"")),r=w(()=>e.horizontal===!0?"height":"width"),d=w(()=>e.reverse!==!0?"before":"after"),n=w(()=>e.limits!==void 0?e.limits:e.unit==="%"?[10,90]:[50,1/0]);function c(f){return(e.unit==="%"?f:Math.round(f))+e.unit}const P=w(()=>({[d.value]:{[r.value]:c(e.modelValue)}}));let p,D,j,I,h;function Z(f){if(f.isFirst===!0){const N=u.value.getBoundingClientRect()[r.value];p=e.horizontal===!0?"up":"left",D=e.unit==="%"?100:N,j=Math.min(D,n.value[1],Math.max(n.value[0],e.modelValue)),I=(e.reverse!==!0?1:-1)*(e.horizontal===!0?1:i.lang.rtl===!0?-1:1)*(e.unit==="%"?N===0?0:100/N:1),u.value.classList.add("q-splitter--active");return}if(f.isFinal===!0){h!==e.modelValue&&l("update:modelValue",h),u.value.classList.remove("q-splitter--active");return}const b=j+I*(f.direction===p?-1:1)*f.distance[e.horizontal===!0?"y":"x"];h=Math.min(D,n.value[1],Math.max(n.value[0],b)),m[d.value].value.style[r.value]=c(h),e.emitImmediately===!0&&e.modelValue!==h&&l("update:modelValue",h)}const G=w(()=>[[ae,Z,void 0,{[e.horizontal===!0?"vertical":"horizontal"]:!0,prevent:!0,stop:!0,mouse:!0,mouseAllDir:!0}]]);function M(f,b){f<b[0]?l("update:modelValue",b[0]):f>b[1]&&l("update:modelValue",b[1])}return T(()=>e.modelValue,f=>{M(f,n.value)}),T(()=>e.limits,()=>{ie(()=>{M(e.modelValue,n.value)})}),()=>{const f=[E("div",{ref:m.before,class:["q-splitter__panel q-splitter__before"+(e.reverse===!0?" col":""),e.beforeClass],style:P.value.before},$(a.before)),E("div",{class:["q-splitter__separator",e.separatorClass],style:e.separatorStyle,"aria-disabled":e.disable===!0?"true":void 0},[se("div",{class:"q-splitter__separator-area absolute-full"},$(a.separator),"sep",e.disable!==!0,()=>G.value)]),E("div",{ref:m.after,class:["q-splitter__panel q-splitter__after"+(e.reverse===!0?"":" col"),e.afterClass],style:P.value.after},$(a.after))];return E("div",{class:_.value,ref:u},re(a.default,f))}}});const xe=y("div",{class:"text-h4 q-mb-md"},"Change Email",-1),Pe=S({__name:"ChangeEmail",setup(e){const a=Q(),{getUserEmail:l,updateUserEmail:i}=a,{userEmail:s}=O(Q()),u=Y(),m=v("");H(async()=>{try{await l()}catch{s.value="Error getting email"}});async function _(){try{const r=await i(m.value);r&&(s.value=r.data.email,u.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Email Updated Successfully"}))}catch(r){console.log(r)}}return(r,d)=>(x(),U(z,null,[xe,t(B,{onSubmit:_},{default:o(()=>[y("p",null,"Current Email: "+J(q(s)),1),t(C,{filled:"",modelValue:m.value,"onUpdate:modelValue":d[0]||(d[0]=n=>m.value=n),label:"New email",hint:"","lazy-rules":"",rules:[n=>n&&n.length>0||"Please type something",n=>q(we).test(n)||"Please type a valid email address"]},{append:o(()=>[t(g,{onClick:_,class:"button",icon:"change_circle",unelevated:"",rounded:"",dense:"",label:"Update"})]),_:1},8,["modelValue","rules"])]),_:1})],64))}}),qe=y("div",{class:"text-h4 q-mb-md"},"Change Password",-1),Se=S({__name:"ChangePassword",setup(e){const a=v(!1),l=v(!1),i=v(""),s=v(""),u=Q(),{changePassword:m}=u,_=Y();async function r(){console.log(i.value,s.value);try{await m({currentPassword:i.value,newPassword:s.value})&&_.notify({color:"green-4",textColor:"white",icon:"cloud_done",message:"Submitted"})}catch(d){console.log(d)}}return(d,n)=>(x(),U(z,null,[qe,t(B,{onSubmit:r},{default:o(()=>[t(C,{filled:"",type:a.value?"text":"password",modelValue:i.value,"onUpdate:modelValue":n[1]||(n[1]=c=>i.value=c),label:"Current Password","lazy-rules":"",rules:[c=>c&&c.length>0||"Please type something"]},{default:o(()=>[t(g,{onClick:n[0]||(n[0]=c=>a.value=!a.value),icon:a.value?"visibility_off":"visibility",unelevated:"",rounded:"",dense:""},null,8,["icon"])]),_:1},8,["type","modelValue","rules"]),t(C,{filled:"",type:l.value?"text":"password",modelValue:s.value,"onUpdate:modelValue":n[3]||(n[3]=c=>s.value=c),label:"New Password","lazy-rules":"",rules:[c=>c&&c.length>0||"Please type something"]},{default:o(()=>[t(g,{onClick:n[2]||(n[2]=c=>l.value=!l.value),icon:l.value?"visibility_off":"visibility",unelevated:"",rounded:"",dense:""},null,8,["icon"])]),_:1},8,["type","modelValue","rules"]),t(g,{onClick:r},{default:o(()=>[V("Change Password")]),_:1})]),_:1})],64))}}),Ae=y("div",{class:"text-h4 q-mb-md"},"Edit Profile",-1),ke=S({__name:"EditProfile",setup(e){const a=Ve(),{getMyAccount:l,editAccount:i}=a,{currentAccount:s}=O(a);H(async()=>{try{await l()}catch(d){console.log(d)}});const u=v(""),m=v(""),_=v("");async function r(){try{const d=await i({newName:u.value,newAvatarUrl:m.value,newCoverUrl:_.value});await l(),console.log(d)}catch(d){console.log(d)}}return(d,n)=>(x(),U(z,null,[Ae,t(B,{onSubmit:r,class:"column justify-center align-center"},{default:o(()=>{var c,P;return[y("div",null,"Current Name: "+J((c=q(s))==null?void 0:c.name),1),t(C,{modelValue:u.value,"onUpdate:modelValue":n[0]||(n[0]=p=>u.value=p),label:"New name"},null,8,["modelValue"]),t(C,{modelValue:m.value,"onUpdate:modelValue":n[1]||(n[1]=p=>m.value=p),label:"Avatar Image Link"},{prepend:o(()=>[t(de,{size:"48px"},{default:o(()=>{var p;return[t(F,{src:(p=q(s))==null?void 0:p.avatarUrl},null,8,["src"])]}),_:1})]),_:1},8,["modelValue"]),t(F,{src:(P=q(s))==null?void 0:P.coverUrl},null,8,["src"]),t(C,{modelValue:_.value,"onUpdate:modelValue":n[2]||(n[2]=p=>_.value=p),label:"Cover Image Link"},null,8,["modelValue"]),t(g,{class:"q-ma-md",onClick:r},{default:o(()=>[V("Make Changes")]),_:1})]}),_:1})],64))}});function K(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const a=parseInt(e,10);return isNaN(a)?0:a}var Ee=ce({name:"close-popup",beforeMount(e,{value:a}){const l={depth:K(a),handler(i){l.depth!==0&&setTimeout(()=>{const s=me(e);s!==void 0&&fe(s,i,l.depth)})},handlerKey(i){ve(i,13)===!0&&l.handler(i)}};e.__qclosepopup=l,e.addEventListener("click",l.handler),e.addEventListener("keyup",l.handlerKey)},updated(e,{value:a,oldValue:l}){a!==l&&(e.__qclosepopup.depth=K(a))},beforeUnmount(e){const a=e.__qclosepopup;e.removeEventListener("click",a.handler),e.removeEventListener("keyup",a.handlerKey),delete e.__qclosepopup}});const Qe=y("div",{class:"text-h4 q-mb-md"},"Delete Account",-1),Ue={class:"column justify-center align-center"},ze=S({__name:"DeleteAccount",setup(e){const a=v(!1),l=_e(),i=Q(),{removeAuthData:s,deleteAccount:u}=i;async function m(){try{await u(),s(),await l.push(ye.auth)}catch(_){console.log(_)}}return(_,r)=>(x(),U(z,null,[Qe,y("div",Ue,[t(R,{rounded:"",dense:"","inline-actions":"",class:"text-white bg-red"},{default:o(()=>[V(" This will permanently delete your Account ")]),_:1}),t(g,{class:"q-ma-md",color:"red",label:"Delete Account",onClick:r[0]||(r[0]=d=>a.value=!0)})]),t(pe,{modelValue:a.value,"onUpdate:modelValue":r[1]||(r[1]=d=>a.value=d)},{default:o(()=>[t(W,{style:{width:"370px"}},{default:o(()=>[t(L,{class:"row justify-center no-wrap"},{default:o(()=>[t(R,{rounded:"",class:"text-weight-bold text-white bg-negative"},{default:o(()=>[V(" Are you sure you want to delete your Account? ")]),_:1})]),_:1}),t(L,{class:"row justify-end"},{default:o(()=>[ge((x(),X(g,{class:"q-mr-md"},{default:o(()=>[V("Cancel")]),_:1})),[[Ee]]),t(g,{class:"bg-negative text-white",onClick:m},{default:o(()=>[V("Confirm")]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])],64))}});const De=S({__name:"SettingsPage",setup(e){const a=v(30),l=v("changeEmail");return(i,s)=>(x(),X(be,{class:"row justify-center align-center"},{default:o(()=>[t(W,{class:"card-container"},{default:o(()=>[t(Ce,{modelValue:a.value,"onUpdate:modelValue":s[2]||(s[2]=u=>a.value=u),class:"fit"},{before:o(()=>[t(ee,{modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=u=>l.value=u),vertical:"",class:"text-teal","inline-label":""},{default:o(()=>[t(A,{name:"changeEmail",icon:"mail",label:"Change Email"}),t(A,{name:"changePassword",icon:"password",label:"Change Password"}),t(A,{name:"editProfile",icon:"edit",label:"Edit Profile"}),t(A,{name:"deleteAccount",icon:"delete",label:"Delete Account"})]),_:1},8,["modelValue"])]),after:o(()=>[t(te,{modelValue:l.value,"onUpdate:modelValue":s[1]||(s[1]=u=>l.value=u),animated:"",swipeable:"",vertical:"","transition-prev":"jump-up","transition-next":"jump-up"},{default:o(()=>[t(k,{name:"changeEmail"},{default:o(()=>[t(Pe)]),_:1}),t(k,{name:"changePassword"},{default:o(()=>[t(Se)]),_:1}),t(k,{name:"editProfile"},{default:o(()=>[t(ke)]),_:1}),t(k,{name:"deleteAccount"},{default:o(()=>[t(ze)]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["modelValue"])]),_:1})]),_:1}))}});var He=he(De,[["__scopeId","data-v-49172db6"]]);export{He as default};
